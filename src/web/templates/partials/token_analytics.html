<!-- Summary Cards -->
<div class="analytics-summary">
    <div class="summary-card">
        <div class="summary-icon">ðŸ”¢</div>
        <div class="summary-content">
            <div class="summary-value">{{ "{:,}".format(total_tokens | default(0)) }}</div>
            <div class="summary-label">Total Tokens</div>
        </div>
    </div>
    
    <div class="summary-card">
        <div class="summary-icon">ðŸ“Š</div>
        <div class="summary-content">
            <div class="summary-value">{{ total_entries | default(0) }}</div>
            <div class="summary-label">LLM Calls</div>
        </div>
    </div>
</div>

<!-- Breakdown by Provider -->
{% if tokens_by_provider %}
<div class="analytics-section">
    <div class="section-header">
        <h3 class="section-title">By Provider</h3>
    </div>
    <div class="section-content">
        <div class="breakdown-grid">
            {% for provider, tokens in tokens_by_provider.items() %}
            <div class="breakdown-item">
                <div class="breakdown-header">
                    <span class="breakdown-label">{{ provider | capitalize }}</span>
                    <span class="breakdown-value">{{ "{:,}".format(tokens) }}</span>
                </div>
                <div class="progress-bar">
                    {% set pct = (tokens / total_tokens * 100) | int if total_tokens > 0 else 0 %}
                    <div class="progress-fill provider-{{ provider }}" style="width: {{ pct }}%"></div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

<!-- Breakdown by Operation -->
{% if tokens_by_operation %}
<div class="analytics-section">
    <div class="section-header">
        <h3 class="section-title">By Operation</h3>
    </div>
    <div class="section-content">
        <div class="breakdown-grid">
            {% for operation, tokens in tokens_by_operation.items() %}
            <div class="breakdown-item">
                <div class="breakdown-header">
                    <span class="breakdown-label">{{ operation | replace('_', ' ') | capitalize }}</span>
                    <span class="breakdown-value">{{ "{:,}".format(tokens) }}</span>
                </div>
                <div class="progress-bar">
                    {% set pct = (tokens / total_tokens * 100) | int if total_tokens > 0 else 0 %}
                    <div class="progress-fill operation-{{ operation }}" style="width: {{ pct }}%"></div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

<!-- Recent Entries -->
<div class="analytics-section">
    <div class="section-header">
        <h3 class="section-title">Recent Calls</h3>
    </div>
    
    {% if entries %}
    <div class="entries-table-container">
        <table class="entries-table">
            <thead>
                <tr>
                    <th>Time</th>
                    <th>Provider</th>
                    <th>Model</th>
                    <th>Operation</th>
                    <th>Tokens</th>
                </tr>
            </thead>
            <tbody>
                {% for entry in entries %}
                <tr>
                    <td class="time-cell" data-timestamp="{{ entry.timestamp }}" data-time-format="short"></td>
                    <td><span class="provider-badge provider-{{ entry.provider }}">{{ entry.provider }}</span></td>
                    <td class="model-cell">{{ entry.model }}</td>
                    <td>{{ entry.operation | replace('_', ' ') }}</td>
                    <td class="number-cell total-cell">{{ entry.total_tokens }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="section-content">
        <div class="empty-state">
            <div class="empty-icon">ðŸ“Š</div>
            <p class="empty-title">No token usage data</p>
            <p class="empty-hint">Token usage will be tracked when LLM calls are made.</p>
        </div>
    </div>
    {% endif %}
</div>
