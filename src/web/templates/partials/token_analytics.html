<!-- Summary Cards -->
<div class="analytics-summary">
    <div class="summary-card">
        <div class="summary-icon">ðŸ”¢</div>
        <div class="summary-content">
            <div class="summary-value">{{ total_tokens | default(0) }}</div>
            <div class="summary-label">Total Tokens Used</div>
        </div>
    </div>
    
    <div class="summary-card">
        <div class="summary-icon">ðŸ“Š</div>
        <div class="summary-content">
            <div class="summary-value">{{ total_entries | default(0) }}</div>
            <div class="summary-label">Total LLM Calls</div>
        </div>
    </div>
</div>

<!-- Breakdown by Provider -->
{% if tokens_by_provider %}
<div class="analytics-section">
    <h3 class="section-title">Tokens by Provider</h3>
    <div class="breakdown-grid">
        {% for provider, tokens in tokens_by_provider.items() %}
        <div class="breakdown-item">
            <div class="breakdown-header">
                <span class="breakdown-label">{{ provider | capitalize }}</span>
                <span class="breakdown-value">{{ tokens }}</span>
            </div>
            <div class="progress-bar">
                {% set pct = (tokens / total_tokens * 100) | int if total_tokens > 0 else 0 %}
                <div class="progress-fill provider-{{ provider }}" style="width: {{ pct }}%"></div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- Breakdown by Operation -->
{% if tokens_by_operation %}
<div class="analytics-section">
    <h3 class="section-title">Tokens by Operation</h3>
    <div class="breakdown-grid">
        {% for operation, tokens in tokens_by_operation.items() %}
        <div class="breakdown-item">
            <div class="breakdown-header">
                <span class="breakdown-label">{{ operation | replace('_', ' ') | capitalize }}</span>
                <span class="breakdown-value">{{ tokens }}</span>
            </div>
            <div class="progress-bar">
                {% set pct = (tokens / total_tokens * 100) | int if total_tokens > 0 else 0 %}
                <div class="progress-fill operation-{{ operation }}" style="width: {{ pct }}%"></div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- Recent Entries -->
<div class="analytics-section">
    <h3 class="section-title">Recent LLM Calls</h3>
    
    {% if entries %}
    <div class="entries-table-container">
        <table class="entries-table">
            <thead>
                <tr>
                    <th>Time</th>
                    <th>Provider</th>
                    <th>Model</th>
                    <th>Operation</th>
                    <th>Prompt</th>
                    <th>Completion</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                {% for entry in entries %}
                <tr>
                    <td class="time-cell">{{ entry.timestamp[:19] if entry.timestamp else '-' }}</td>
                    <td><span class="provider-badge provider-{{ entry.provider }}">{{ entry.provider }}</span></td>
                    <td class="model-cell">{{ entry.model }}</td>
                    <td>{{ entry.operation | replace('_', ' ') }}</td>
                    <td class="number-cell">{{ entry.prompt_tokens }}</td>
                    <td class="number-cell">{{ entry.completion_tokens }}</td>
                    <td class="number-cell total-cell">{{ entry.total_tokens }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-icon">ðŸ“Š</div>
        <p>No token usage data yet</p>
        <p class="empty-hint">Token usage will be tracked when LLM calls are made.</p>
    </div>
    {% endif %}
</div>

